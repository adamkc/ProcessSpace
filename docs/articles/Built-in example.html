<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Built-in example • ProcessSpace</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Built-in example">
<meta property="og:description" content="ProcessSpace">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ProcessSpace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Built-in%20example.html">Built-in example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Built-in example</h1>
                        <h4 class="author">Adam Cummings</h4>
            
            <h4 class="date">6/9/2020</h4>
      
      
      <div class="hidden name"><code>Built-in example.Rmd</code></div>

    </div>

    
    
<div id="load-the-required-packages" class="section level1">
<h1 class="hasAnchor">
<a href="#load-the-required-packages" class="anchor"></a>Load the required packages:</h1>
</div>
<div id="load-the-data-files-and-check-them" class="section level1">
<h1 class="hasAnchor">
<a href="#load-the-data-files-and-check-them" class="anchor"></a>load the Data files and check them</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">rasterDir</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"external/raster.tif"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"ProcessSpace"</span>)
<span class="no">streamsDir</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"external/streams.shp"</span>, <span class="kw">package</span><span class="kw">=</span><span class="st">"ProcessSpace"</span>)
<span class="no">r</span> <span class="kw">&lt;-</span> <span class="fu">raster</span>(<span class="no">rasterDir</span>)
<span class="no">streams</span> <span class="kw">&lt;-</span> <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_read.html">read_sf</a></span>(<span class="no">streamsDir</span>)

<span class="no">s</span> <span class="kw">&lt;-</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/terrain.html">terrain</a></span>(<span class="no">r</span>, <span class="kw">opt</span><span class="kw">=</span><span class="st">"slope"</span>)
<span class="no">a</span> <span class="kw">&lt;-</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/terrain.html">terrain</a></span>(<span class="no">r</span>, <span class="kw">opt</span><span class="kw">=</span><span class="st">"aspect"</span>)
<span class="no">h</span> <span class="kw">&lt;-</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/hillShade.html">hillShade</a></span>(<span class="no">s</span>,<span class="no">a</span>)
<span class="no">h</span> <span class="kw">%&gt;%</span> <span class="fu">rasterToPoints</span>() <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">ggplot</span>() + <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="kw">x</span><span class="kw">=</span><span class="no">x</span>,<span class="kw">y</span><span class="kw">=</span><span class="no">y</span>,<span class="kw">fill</span><span class="kw">=</span><span class="no">layer</span>),<span class="kw">show.legend</span> <span class="kw">=</span> <span class="fl">FALSE</span>) + <span class="fu">geom_sf</span>(<span class="kw">data</span><span class="kw">=</span><span class="no">streams</span>) +
  <span class="fu">geom_sf_label</span>(<span class="kw">data</span><span class="kw">=</span><span class="no">streams</span>,<span class="fu">aes</span>(<span class="kw">label</span><span class="kw">=</span><span class="no">LINKNO</span>),<span class="kw">size</span><span class="kw">=</span><span class="fl">3</span>,
                <span class="kw">label.padding</span><span class="kw">=</span><span class="fu">unit</span>(<span class="fl">.1</span>,<span class="st">"lines"</span>)) +
  <span class="fu">scale_fill_viridis_c</span>()</pre></body></html></div>
<p><img src="Built-in%20example_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
<p>We like the look of stream segments 12, 20, and 19 for further investigation</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">targetStream</span> <span class="kw">&lt;-</span> <span class="no">streams</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">LINKNO</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">12</span>,<span class="fl">20</span>,<span class="fl">19</span>))
<span class="co">#Check that you grabbed the right streams:</span>
<span class="no">targetStream</span> <span class="kw">%&gt;%</span> <span class="fu">ggplot</span>() + <span class="fu">geom_sf</span>()</pre></body></html></div>
<p><img src="Built-in%20example_files/figure-html/unnamed-chunk-2-1.png" width="480"></p>
</div>
<div id="lets-run-it-through-the-tool" class="section level1">
<h1 class="hasAnchor">
<a href="#lets-run-it-through-the-tool" class="anchor"></a>Lets run it through the tool!</h1>
<div id="first-generate-the-cross-sections" class="section level2">
<h2 class="hasAnchor">
<a href="#first-generate-the-cross-sections" class="anchor"></a>First, generate the cross sections:</h2>
<p>This places evenly spaced points along the selected stream file at the interval selected. Then it draws semi-permendicular cross sections at each point at for the length given. You need to indicate the general flow direction of the stream with cut1Dir and cut2Dir. If the stream flows West to East provide “W” and “E”, if it flows North to East provide “N”, “E”</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">outputObject</span> <span class="kw">&lt;-</span> <span class="no">targetStream</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/generateCrossSections.html">generateCrossSections</a></span>(<span class="kw">xSectionDensity</span> <span class="kw">=</span> <span class="kw pkg">units</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/as_units.html">as_units</a></span>(<span class="fl">50</span>,<span class="st">"m"</span>),
                        <span class="kw">googleZoom</span><span class="kw">=</span><span class="fl">16</span>,
                        <span class="kw">xSectionLength</span> <span class="kw">=</span> <span class="kw pkg">units</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/as_units.html">as_units</a></span>(<span class="fl">100</span>,<span class="st">"m"</span>),
                        <span class="kw">cut1Dir</span> <span class="kw">=</span> <span class="st">"W"</span>,
                        <span class="kw">cut2Dir</span> <span class="kw">=</span> <span class="st">"E"</span>)</pre></body></html></div>
<pre><code>## Warning: package 'sf' was built under R version 3.6.3</code></pre>
<pre><code>## Linking to GEOS 3.6.1, GDAL 2.2.3, PROJ 4.9.3</code></pre>
<pre><code>## Source : https://maps.googleapis.com/maps/api/staticmap?center=40.326042,-121.484615&amp;zoom=16&amp;size=640x640&amp;scale=2&amp;maptype=satellite&amp;key=xxx-oRKgmsDq4EwFHFtk-g4Sw</code></pre>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">outputObject</span>$<span class="no">satImage</span> <span class="kw">%&gt;%</span> <span class="fu">ggmap</span>()</pre></body></html></div>
<p><img src="Built-in%20example_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div id="second-run-it-through-a-series-of-manipulations" class="section level2">
<h2 class="hasAnchor">
<a href="#second-run-it-through-a-series-of-manipulations" class="anchor"></a>Second, run it through a series of manipulations:</h2>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">transectObject</span> <span class="kw">&lt;-</span> <span class="no">outputObject</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/addTopoLines.html">addTopoLines</a></span>(<span class="kw">rasterDir</span> <span class="kw">=</span> <span class="no">rasterDir</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/addStreamChannels.html">addStreamChannels</a></span>(<span class="kw">rasterDir</span> <span class="kw">=</span> <span class="no">rasterDir</span>,<span class="kw">streamChannelFile</span> <span class="kw">=</span> <span class="no">streamsDir</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/addCrossSectionElevations.html">addCrossSectionElevations</a></span>(<span class="kw">rasterDir</span> <span class="kw">=</span> <span class="no">rasterDir</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/addProcessSpace.html">addProcessSpace</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/buildXSectionPlot.html">buildXSectionPlot</a></span>(<span class="kw">plotFileName</span> <span class="kw">=</span> <span class="st">"exampleOutput.pdf"</span>,<span class="kw">streamChannelFile</span> <span class="kw">=</span> <span class="no">streamsDir</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/rasterPlotter.html">rasterPlotter</a></span>(<span class="kw">rasterDir</span> <span class="kw">=</span> <span class="no">rasterDir</span>)</pre></body></html></div>
<pre><code>## Adding TopoLines -- Completed in 0.06 mins.
## Adding Stream Channel Data</code></pre>
<pre><code>## Warning: attribute variables are assumed to be spatially constant throughout all
## geometries</code></pre>
<pre><code>##  -- Completed in 0.05 mins.
## Extracting Cross Section Elevations -- Completed in 0.03 mins.
## Calculating Process Space Polygons</code></pre>
<pre><code>## Warning: Column `pointID`/`Transect` joining character vector and factor,
## coercing into character vector

## Warning: attribute variables are assumed to be spatially constant throughout all
## geometries

## Warning: attribute variables are assumed to be spatially constant throughout all
## geometries</code></pre>
<pre><code>##  -- Completed in 0.05 mins.
## Generating Map Plot</code></pre>
<pre><code>## although coordinates are longitude/latitude, st_intersection assumes that they are planar</code></pre>
<pre><code>## Warning: attribute variables are assumed to be spatially constant throughout all
## geometries</code></pre>
<pre><code>## Coordinate system already present. Adding new coordinate system, which will replace the existing one.</code></pre>
<pre><code>##  -- Completed in 0 mins.</code></pre>
<pre><code>## Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
## give correct results for longitude/latitude data</code></pre>
<pre><code>## Warning: Removed 339 rows containing missing values (geom_point).</code></pre>
<pre><code>## Warning: Removed 161 row(s) containing missing values (geom_path).</code></pre>
<pre><code>## Generating Detrended Elevation Raster[inverse distance weighted interpolation]
##  -- Completed in 0.08 mins.</code></pre>
</div>
<div id="then-expor-the-results-as-a-comprehensive-kmz-file" class="section level2">
<h2 class="hasAnchor">
<a href="#then-expor-the-results-as-a-comprehensive-kmz-file" class="anchor"></a>Then expor the results as a comprehensive KMZ file:</h2>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/exportSpatials.html">exportSpatials</a></span>(<span class="no">transectObject</span>,<span class="kw">sectionName</span> <span class="kw">=</span> <span class="st">"exampleOutput"</span>)</pre></body></html></div>
<pre><code>## Writing kml to:
## exampleOutput.kml
## There are 28 ggplots being generated</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam Cummings.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
