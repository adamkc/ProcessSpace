<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Built-in example • ProcessSpace</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Built-in example">
<meta property="og:description" content="ProcessSpace">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ProcessSpace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.05</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Built-in-example.html">Built-in example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/adamkc/ProcessSpace/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Built-in example</h1>
                        <h4 data-toc-skip class="author">Adam
Cummings</h4>
            
            <h4 data-toc-skip class="date">6/9/2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/adamkc/ProcessSpace/blob/HEAD/vignettes/Built-in-example.Rmd" class="external-link"><code>vignettes/Built-in-example.Rmd</code></a></small>
      <div class="hidden name"><code>Built-in-example.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="example-processspace-tool-application">Example ProcessSpace tool application<a class="anchor" aria-label="anchor" href="#example-processspace-tool-application"></a>
</h2>
<div class="section level3">
<h3 id="load-the-required-packages">Load the required packages:<a class="anchor" aria-label="anchor" href="#load-the-required-packages"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#devtools::install_github("adamkc/ProcessSpace")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ProcessSpace</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap" class="external-link">ggmap</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span>  </span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-the-data-files-and-check-them">Load the Data files and check them<a class="anchor" aria-label="anchor" href="#load-the-data-files-and-check-them"></a>
</h3>
<p>These files are generic and come with the <code>ProcessSpace</code>
package. However, you will need to provide your own raster DEM and
streamline shapefile at some point. It is important to note that these
files are not specific to your project and may require customization to
fit your needs.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rasterFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/raster.tif"</span>, package<span class="op">=</span><span class="st">"ProcessSpace"</span><span class="op">)</span></span>
<span><span class="va">streamShapefilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/streams.shp"</span>, package<span class="op">=</span><span class="st">"ProcessSpace"</span><span class="op">)</span></span>
<span><span class="va">streams</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="va">streamShapefilePath</span><span class="op">)</span></span></code></pre></div>
<p>Now, let’s plot the raster hillshade. This process may take some time
to calculate the hillshade values. It is important to note that this
step is not required for running the <code>ProcessSpace</code> tool.
However, visualizing the hillshade can provide valuable insights into
the terrain and help with further analysis.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">rasterFilePath</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">r</span>, opt<span class="op">=</span><span class="st">"slope"</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">r</span>, opt<span class="op">=</span><span class="st">"aspect"</span><span class="op">)</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/hillShade.html" class="external-link">hillShade</a></span><span class="op">(</span><span class="va">s</span>,<span class="va">a</span><span class="op">)</span></span>
<span><span class="va">rasterPlot</span> <span class="op">&lt;-</span> <span class="va">h</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterToPoints.html" class="external-link">rasterToPoints</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_raster</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">y</span>,fill<span class="op">=</span><span class="va">layer</span><span class="op">)</span>,</span>
<span>                       show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">streams</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_label</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">streams</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">LINKNO</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">3</span>,</span>
<span>                label.padding<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">.1</span>,<span class="st">"lines"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">rasterPlot</span></span></code></pre></div>
<p><img src="Built-in-example_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Let’s imagine that we want to gather more information about stream
segments <em>12</em> and <em>20</em>. We can select these segments using
any method as long as we only include them in the
<code>*ProcessSpace*</code> functions. In this example, we will use the
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code> function to create a new object based on the
<em>LINKNO</em> field. However, you could also use a spatial filter or
other filtering methods. If your streamfile does not have a LINKNO
attribute, you can use the unique identifier column for your
dataset.</p>
<p>After selecting the segments, we can plot the results and confirm
that we have chosen the correct ones. We will highlight the selected
segments in blue. It is important to note that the
<code>ProcessSpace</code> tool cannot handle branching stream
structures. Therefore, we need to ensure that we only select one flow
path without missing any segments in the middle.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">targetStream</span> <span class="op">&lt;-</span> <span class="va">streams</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LINKNO</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#Check that you grabbed the right streams:</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">streams</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">targetStream</span>,col<span class="op">=</span><span class="st">"blue4"</span>,linewidth<span class="op">=</span><span class="fl">3</span>,alpha<span class="op">=</span><span class="fl">.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/theme_nothing.html" class="external-link">theme_nothing</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Built-in-example_files/figure-html/unnamed-chunk-4-1.png" width="384"></p>
<p>Great. We clearly grabbed the correct segments.</p>
</div>
<div class="section level3">
<h3 id="lets-run-it-through-the-tool">Lets run it through the tool!<a class="anchor" aria-label="anchor" href="#lets-run-it-through-the-tool"></a>
</h3>
<div class="section level4">
<h4 id="first-generate-the-cross-sections">First, generate the cross sections:<a class="anchor" aria-label="anchor" href="#first-generate-the-cross-sections"></a>
</h4>
<p>This function places evenly spaced points along a selected stream
file at a specified interval and draws semi-perpendicular cross sections
at each point for a given length. To indicate the flow direction of the
stream, the argument <code>cut1Dir</code> should be used. For example,
if the stream flows from West to East, input “W”, and if it flows from
North to East, input “N”.</p>
<p>The cross section lines are placed without using a raster file, so
the package cannot determine the flow direction automatically.</p>
<p>Additionally, if the <code>ggmap</code> package is linked to a Google
Cloud Platform account, the function will return a satellite image of
the location being analyzed. If the package is not linked, a topographic
map will be returned instead.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transectObject</span> <span class="op">&lt;-</span> <span class="va">targetStream</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/generateCrossSections.html">generateCrossSections</a></span><span class="op">(</span>xSectionDensity <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">as_units</a></span><span class="op">(</span><span class="fl">10</span>,<span class="st">"m"</span><span class="op">)</span>,</span>
<span>                        googleZoom<span class="op">=</span><span class="fl">16</span>,</span>
<span>                        xSectionLength <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">as_units</a></span><span class="op">(</span><span class="fl">100</span>,<span class="st">"m"</span><span class="op">)</span>,</span>
<span>                        cut1Dir <span class="op">=</span> <span class="st">"W"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">Realigning stream upstream to downstream.</span><span style="color: #BBBB00;"> -- Completed in 0.09 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span></span></span></code></pre>
<p>We can examine the <code>transectObject</code> that is returned by
this function. It should be a list with eight named entries:
<code>mainLine</code>, <code>leftSide</code>, <code>rightSide</code>,
<code>ls0</code>, <code>rs0</code>, <code>plotBbox</code>,
<code>satImage</code>, and <code>sampledPoints</code>. At this point, we
can either stop the process and use the generated cross sections for
another purpose, or we can continue with additional
<code>*ProcessSpace*</code> functions. However, it’s important to note
that the cross sections haven’t been used to extract elevations from the
raster file yet, so they only represent the spatial locations of the
cross sections to be sampled. If you want to extract elevations, you’ll
need to use additional functions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transectObject</span><span class="op">$</span><span class="va">satImage</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html" class="external-link">ggmap</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">transectObject</span><span class="op">$</span><span class="va">mainLine</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span>, </span>
<span>          col<span class="op">=</span><span class="st">"blue4"</span>,alpha<span class="op">=</span><span class="fl">.5</span>,size<span class="op">=</span><span class="fl">2</span>,inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">transectObject</span><span class="op">$</span><span class="va">ls0</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span>,</span>
<span>          inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">transectObject</span><span class="op">$</span><span class="va">rs0</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span>,</span>
<span>          col<span class="op">=</span><span class="st">"blue"</span>,inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>    </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">transectObject</span><span class="op">$</span><span class="va">leftSide</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span>,inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">transectObject</span><span class="op">$</span><span class="va">rightSide</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span>,</span>
<span>          col<span class="op">=</span><span class="st">"blue"</span>,inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Built-in-example_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="second-run-it-through-a-series-of-manipulations">Second, run it through a series of manipulations:<a class="anchor" aria-label="anchor" href="#second-run-it-through-a-series-of-manipulations"></a>
</h4>
<p>The <code>ProcessSpace</code> package consists of approximately ten
functions that are used to perform the analysis. These functions can be
executed individually, as demonstrated in the commented code below.
Alternatively, the <code>allAtOnce</code> function can be used to
execute all of the functions together.</p>
<p>It is important to note that the package’s functions are designed to
work seamlessly together, and executing them in the correct order is
crucial to obtaining accurate results. Therefore, it is recommended to
use the <code>allAtOnce</code> function to ensure that the analysis is
performed correctly.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Long and version:</span></span>
<span></span>
<span><span class="co"># transectObject &lt;- transectObject %&gt;%</span></span>
<span><span class="co">#   addTopoLines(rasterDir = rasterFilePath) %&gt;%</span></span>
<span><span class="co">#   addStreamChannels(rasterDir = rasterFilePath,streamDir = streamShapefilePath) %&gt;%</span></span>
<span><span class="co">#   addCrossSectionElevations(rasterDir = rasterFilePath) %&gt;%</span></span>
<span><span class="co">#   addProcessSpace() %&gt;%</span></span>
<span><span class="co">#   buildXSectionPlot(plotFileName = "exampleOutput.pdf",streamDir = streamShapefilePath) %&gt;%</span></span>
<span><span class="co">#   rasterPlotter(rasterDir = rasterFilePath)</span></span>
<span></span>
<span><span class="co">## Short and version:</span></span>
<span></span>
<span><span class="va">transectObject</span> <span class="op">&lt;-</span> <span class="va">transectObject</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/allAtOnce.html">allAtOnce</a></span><span class="op">(</span>outputFilename <span class="op">=</span> <span class="st">"exampleOutput.pdf"</span>,</span>
<span>                             rasterDir <span class="op">=</span> <span class="va">rasterFilePath</span>,</span>
<span>                             verticalCutoff<span class="op">=</span><span class="fl">8</span>,</span>
<span>                             streamDir <span class="op">=</span> <span class="va">streamShapefilePath</span>,</span>
<span>                             returnObject <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                             doExportSpatial <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">Adding TopoLines</span><span style="color: #BBBB00;"> -- Completed in 0.03 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span><span style="color: #00BB00;">Extracting Cross Section Elevations</span><span style="color: #BBBB00;"> -- Completed in 0.1 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span><span style="color: #00BB00;">Calculating Process Space Polygons</span><span style="color: #BBBB00;"> -- Completed in 1.46 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span><span style="color: #00BB00;">Generating Map Plot</span><span style="color: #BBBB00;"> -- Completed in 0.01 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span></span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BB00;">Generating Detrended Elevation Raster</span>[inverse distance weighted interpolation]</span></span>
<span><span class="co">## <span style="color: #BBBB00;"> -- Completed in 0.34 mins.</span></span></span>
<span><span class="co"><span style="color: #BBBB00;">## </span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="then-export-the-results-as-a-comprehensive-kmz-file">Then export the results as a comprehensive KMZ file:<a class="anchor" aria-label="anchor" href="#then-export-the-results-as-a-comprehensive-kmz-file"></a>
</h4>
<p>To create a comprehensive KMZ file, export the results including the
cross section plots embedded within it. By clicking on the points along
the stream file, the cross section plots can be accessed. This can also
be done using the <code>allAtOnce</code> function with the
<code>doExportSpatial = TRUE</code> argument. However, note that
producing the ggplot files for each transect can be time-consuming,
taking approximately 1 second per plot.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/exportSpatials.html">exportSpatials</a></span><span class="op">(</span><span class="va">transectObject</span>,sectionName <span class="op">=</span> <span class="st">"exampleOutput"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="heres-what-the-detrended-raster-and-a-single-cross-section-plot-can-look-like">Here’s what the detrended raster and a single cross section plot can
look like:<a class="anchor" aria-label="anchor" href="#heres-what-the-detrended-raster-and-a-single-cross-section-plot-can-look-like"></a>
</h4>
<p>In the KMZ, areas of the map that have lower elevations than the
stream are colored green, areas that have similar elevations to the
stream are colored blue, and areas that have higher elevations than the
stream are colored from red to tan. The raster is displayed here is
using a default palette that is different from the kmz. It is important
to note that the detrended raster is based on the cross sections, so if
there are relatively few cross sections generated, as seen in this
example, the output raster will have edge artifacts. To obtain a
smoother detrended raster, the code should be rerun with an increased
density of cross sections, such as every 2 meters. This will result in a
more accurate representation of the terrain.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># legend &lt;- magick::image_read("exampleOutput_El_legend.png")</span></span>
<span><span class="co"># detrend &lt;- magick::image_read("exampleOutput_El.png")</span></span>
<span><span class="co"># magick::image_mosaic(c(magick::image_background(detrend,"grey"),legend))</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">transectObject</span><span class="op">$</span><span class="va">detrendedRaster</span><span class="op">)</span></span></code></pre></div>
<p><img src="Built-in-example_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Cross sections are visual representations of the stream channel and
its surroundings, viewed as if you were looking upstream. The graph
below shows a typical cross section, with elevations marked in blue and
green bands that represent distances within 1ft and 2ft of the stream
channel, respectively. By examining the cross section, we can see that
the stream is flowing through a highly incised channel, which means that
the channel is deeply cut into the surrounding terrain. The terrain
slopes downhill in perpendicular directions from the stream path,
indicating that the stream is flowing through a valley or canyon.</p>
<p>In this particular case, the stream flow is caused by a road capture
event, which occurs when a road or other man-made structure diverts
water from its natural path. In this case, the road has captured the
flow of the stream, causing it to run along the top of a ridge. This can
have significant impacts on the surrounding ecosystem, including changes
to water quality, erosion, and habitat loss. Understanding the
topography of the stream and its surroundings is crucial for managing
these impacts and ensuring the health of the ecosystem.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">magick</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html" class="external-link">image_read</a></span><span class="op">(</span><span class="st">"exampleOutput-Images/Transect_5_temp_.png"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Built-in-example_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>You can save the detrended raster file to load into other software
like ArcMap.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transectObject</span><span class="op">$</span><span class="va">detrendedRaster</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="st">"DetrendedRaster.tif"</span>, overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Adam Cummings.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
